---
title: 分布式数据库 - Paxos
categories: 一致性协议
tags:
  - 分布式系统
  - 一致性协议
# cover: 文章封面图片URL
# passwords: removeitifnoneed
date: 2019-03-06 14:57:18
---

分布式一致性算法：paxos

<!-- more -->

# 简介

Paxos算法是莱斯利·兰伯特于1990年提出的一种基于消息传递的一致性算法。Paxos算法主要用于解决问题是：在分布式系统中如何就某个协议达成一致。

Google Chubby的作者Mike Burrows说过，“这个世界上只有一种一致性算法，那就是Paxos，其它的算法都是残次品。‘’

但是Paxos算法晦涩难懂，对于工程上实现难度很高，所以业内使用的大多是Paxos算法的残缺版本。之前在哪里听过的一句话：*Paxos的难度在于，当你实现了该算法的时候，你也无法确定你的这套算法就是符合Paxos标准的。*

# 算法

## 拜占庭将军问题

### 问题描述

拜占庭帝国想要进攻一个强大的敌人，为此派出了10支军队去包围这个敌人。这个敌人虽不比拜占庭帝国，但也足以抵御5支常规拜占庭军队的同时袭击。这10支军队在分开的包围状态下同时攻击。他们任一支军队单独进攻都毫无胜算，除非有至少6支军队（一半以上）同时袭击才能攻下敌国。他们分散在敌国的四周，依靠通信兵骑马相互通信来协商进攻意向及进攻时间。困扰这些将军的问题是，他们不确定他们中是否有叛徒，叛徒可能擅自变更进攻意向或者进攻时间。在这种状态下，拜占庭将军们才能保证有多于6支军队在同一时间一起发起进攻，从而赢取战斗？



## Paxos

paxos算法的**前提是不存在拜占庭将军问题**，即信道是安全的、可靠的集群节点中传递的消息是不可以被篡改的。因为这些信道不安全，消息是否被篡改属于别的方面的问题，我们可以通过加密校验等算法来保证消息是安全的。

分布式系统中各个节点一般采用2种通信模型

- 共享内存：所有的消息都汇总到一个地方，然后也都从一个地方获取。缺点很明显就是中心化，一旦中心失效就完蛋了。
- 消息传递：消息发送给所有的参与者，去中心化，然后依据收到的消息来决定选举情况。

这两种情况也对应着2中网络拓扑结构：星状和网状。

### 算法描述





### paxos活锁问题