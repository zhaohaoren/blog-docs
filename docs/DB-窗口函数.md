# 窗口函数

第一次知道窗口函数，还是`PostgreSQL`

在开窗函数出现之前存在着非常多用 SQL 语句非常难解决的问题，非常多都要通过复杂的相关子查询或者存储过程来完毕。为了解决这些问题，在2003年ISO SQL标准增加了开窗函数，开窗函数的使用使得这些经典的难题能够被轻松的解决。眼下在 MSSQLServer、Oracle、DB2 等主流数据库中都提供了对开窗函数的支持，只是非常遗憾的是 MYSQL 临时还未对开窗函数给予支持。


开窗函数的调用格式为：
函数名(列) OVER(选项)
OVER 关键字表示把函数当成开窗函数而不是聚合函数。SQL 标准允许将所有聚
合函数用做开窗函数，使用OVER 关键字来区分这两种用法。





在开窗函数出现之前存在着非常多用 SQL 语句非常难解决的问题，非常多都要通过复杂的相关子查询或者存储过程来完毕。为了解决这些问题，在2003年ISO SQL标准增加了开窗函数，开窗函数的使用使得这些经典的难题能够被轻松的解决。眼下在 MSSQLServer、Oracle、DB2 等主流数据库中都提供了对开窗函数的支持，只是非常遗憾的是 MYSQL 临时还未对开窗函数给予支持。





 所谓开窗函数就是定义一个行为列，简单讲，就是在你查询的结果上，直接多出一列值（可以是聚合值或是排序号），特征就是带有over（）。



 根据使用的目的，开窗函数可以分为两类：聚合开窗函数和排序开窗函数。

  下面主要解析四种常用的排序开窗函数: 

   1、ROW_NUMBER() OVER () ;  

   2、RANK() OVER ();

   3、DENSE_RANK() OVER () ;

   4、NTILE(n) OVER () .





我们到底什么时候需要使用开窗函数： 当需要所要的数据是我们正常的SQL写完，发现有一列数据是我们无法正常获取到的，这时候可以尝试使用窗口函数去计算。



新开一个创久，即新加一个列，这个列的和原来的数据 行数一致